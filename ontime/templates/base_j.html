<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    {% block title %}<title>OnTime Homepage</title>{% endblock %}
    <style>
        body {
            background: linear-gradient(to right, #ccffff 0%, #ffffcc 100%);
        }
    </style>
    <script>
        var today = new Date();
        var month_num = today.getMonth() + 1; // numerical month
        var year = today.getFullYear();
        var yend; // second half of year
        var month; // month as string
        var m; // three letter abbreviation of month

        function caps(word) {
            return word.charAt(0).toUpperCase() + word.slice(1)
        }


        function cal() {
            var ycode, mcode, dcode, leapcode, centcode;
            var val;

            if (month_num === 1) {
                month = 'january';
				m = 'jan';
            } else if (month_num === 2) {
                month = 'february';
				m = 'feb';
            } else if (month_num === 3) {
                month = 'march';
				m = 'mar';
            } else if (month_num === 4) {
                month = 'april';
				m = 'apr';
            } else if (month_num === 5) {
                month = 'may';
				m = 'may';
            } else if (month_num === 6) {
                month = 'june';
				m = 'jun';
            } else if (month_num === 7) {
                month = 'july';
				m = 'jul';
            } else if (month_num === 8) {
                month = 'august';
				m = 'aug';
            } else if (month_num === 9) {
                month = 'september';
				m = 'sep';
            } else if (month_num === 10) {
                month = 'october';
				m = 'oct';
            } else if (month_num === 11) {
                month = 'november';
				m = 'nov';
            } else if (month_num === 12) {
                month = 'december';
				m = 'dec';
            } else {
                month = 'invalid';
				m = 'invalid';
            }

            document.getElementById('MonthYear').innerHTML = caps(month) + " " + year; // changes title of calender to Month Year
            init(); // clears out calender, allows multiple calenders to be generated without refreshing page

            yend = year.toString().slice(-2); // second half of year
            ycode = Number(yearCode());
            mcode = Number(monthCode());
            console.log(mcode);
            dcode = dateCode();
            centcode = Number(centCode());
            if (isLeap()) { // checks for leap year
                if (m === 'jan' || m === 'feb') { // if January or February of leap year, leap code is 1
                    leapcode = 1;
                } else {
                    leapcode = 0;
                }
            } else {
                leapcode = 0;
            }
            console.log("FF");
            for (var i = 1; i <= dcode; i++) {

                // below calculates the value that determines what day of the week a day is
                var add = ycode + mcode + centcode + i;
                var sub = add - Number(leapcode);
                val = sub % 7;

                week(val, i);

            }


        }

        function isLeap() {
            if (year % 4 === 0) { // if a year is divisible by 4, but not 100, it is a leap year
                if (year % 100 === 0) {
                    if (year % 400 === 0) { // a year that is divisible by 4 and 100 must also be divisible by 400 to be a leap year
                        return true;
                    }
                    return false;
                }
                return true;
            }
            return false;
        }

        function yearCode() { // calculates year code
            var temp = Math.trunc(yend / 4);
            var noDec = Number(yend) + temp;

            return noDec % 7;
        }

        function monthCode() { // picks month code
            if (m === 'jan') {
                return 0;
            } else if (m == 'feb') {
                return 3;
            } else if (m == 'mar') {
                return 3;
            } else if (m == 'apr') {
                return 6;
            } else if (m == 'may') {
                return 1;
            } else if (m == 'jun') {
                return 4;
            } else if (m == 'jul') {
                return 6;
            } else if (m == 'aug') {
                return 2;
            } else if (m == 'sep') {
                return 5;
            } else if (m == 'oct') {
                return 0;
            } else if (m == 'nov') {
                return 3;
            } else if (m == 'dec') {
                return 5;
            } else { // debug, or in case of invalid input
                return null;
            }

        }

        function centCode() { // picks century code
            var cent = year % 100; // substrings to just look at century numbers
            console.log(cent);
            if (cent === 18) {
                return 2;
            } else if (cent === 19) {
                return 0;
            } else if (cent === 20) {
                return 6;
            } else if (cent === 21) {
                return 4;
            } else { // debug, or in case of invalid input
                return null;
            }
        }

        function dateCode() { // picks how many days are in the month
            if (m === 'feb') {
                if (isLeap(year)) {
                    return 29;
                }
                return 28;
            } else if (m === 'apr') {
                return 30;
            } else if (m === 'jun') {
                return 30;
            } else if (m === 'sep') {
                return 30;
            } else if (m === 'nov') {
                return 30;
            } else {
                return 31;
            }

        }

        function week(val, i) { // determines what day of the week it is and adds date to calender
            console.log(val + ' ' + i);
            console.log('-----------');
			if (val > 0){
				val = val - 1;
			}else{
				val = 6
			}

            if (val === 0) { // Sunday

                // these statements make sure that the day has the correct placement
                if (0 < i && i < 2) {
                    document.getElementById('Sun1').innerHTML = i;
                } else if (1 < i && i < 9) {
                    document.getElementById('Sun2').innerHTML = i;
                } else if (8 < i && i < 16) {
                    document.getElementById('Sun3').innerHTML = i;
                } else if (15 < i && i < 23) {
                    document.getElementById('Sun4').innerHTML = i;
                } else if (22 < i && i < 30) {
                    document.getElementById('Sun5').innerHTML = i;
                } else {
                    document.getElementById('Sun6').innerHTML = i;
                }

            } else if (val === 1) { // Monday

                if (0 < i && i < 3) {
                    document.getElementById('Mon1').innerHTML = i;
                } else if (2 < i && i < 10) {
                    document.getElementById('Mon2').innerHTML = i;
                } else if (9 < i && i < 17) {
                    document.getElementById('Mon3').innerHTML = i;
                } else if (16 < i && i < 24) {
                    document.getElementById('Mon4').innerHTML = i;
                } else if (23 < i && i < 31) {
                    document.getElementById('Mon5').innerHTML = i;
                } else {
                    document.getElementById('Mon6').innerHTML = i;
                }

            } else if (val === 2) { // Tuesday

                if (0 < i && i < 4) {
                    document.getElementById('Tue1').innerHTML = i;
                } else if (3 < i && i < 11) {
                    document.getElementById('Tue2').innerHTML = i;
                } else if (10 < i && i < 18) {
                    document.getElementById('Tue3').innerHTML = i;
                } else if (17 < i && i < 25) {
                    document.getElementById('Tue4').innerHTML = i;
                } else {
                    document.getElementById('Tue5').innerHTML = i;
                }

            } else if (val === 3) { // Wednesday

                if (0 < i && i < 5) {
                    document.getElementById('Wed1').innerHTML = i;
                } else if (4 < i && i < 12) {
                    document.getElementById('Wed2').innerHTML = i;
                } else if (11 < i && i < 19) {
                    document.getElementById('Wed3').innerHTML = i;
                } else if (18 < i && i < 26) {
                    document.getElementById('Wed4').innerHTML = i;
                } else {
                    document.getElementById('Wed5').innerHTML = i;
                }

            } else if (val === 4) { // Thursday

                if (0 < i && i < 6) {
                    document.getElementById('Thur1').innerHTML = i;
                } else if (5 < i && i < 13) {
                    document.getElementById('Thur2').innerHTML = i;
                } else if (12 < i && i < 20) {
                    document.getElementById('Thur3').innerHTML = i;
                } else if (19 < i && i < 27) {
                    document.getElementById('Thur4').innerHTML = i;
                } else {
                    document.getElementById('Thur5').innerHTML = i;
                }

            } else if (val === 5) { // Friday

                if (0 < i && i < 7) {
                    document.getElementById('Fri1').innerHTML = i;
                } else if (6 < i && i < 14) {
                    document.getElementById('Fri2').innerHTML = i;
                } else if (13 < i && i < 21) {
                    document.getElementById('Fri3').innerHTML = i;
                } else if (20 < i && i < 28) {
                    document.getElementById('Fri4').innerHTML = i;
                } else {
                    document.getElementById('Fri5').innerHTML = i;
                }

            } else if (val === 6) { // Saturday

                if (0 < i && i < 8) {
                    document.getElementById('Sat1').innerHTML = i;
                } else if (7 < i && i < 15) {
                    document.getElementById('Sat2').innerHTML = i;
                } else if (14 < i && i < 22) {
                    document.getElementById('Sat3').innerHTML = i;
                } else if (21 < i && i < 29) {
                    document.getElementById('Sat4').innerHTML = i;
                } else {
                    document.getElementById('Sat5').innerHTML = i;
                }

            } else { // debug

                alert("Something went wrong!");

            }

        }

        function init() { // clears out calender

            document.getElementById('Sun1').innerHTML = " ";
            document.getElementById('Sun2').innerHTML = " ";
            document.getElementById('Sun3').innerHTML = " ";
            document.getElementById('Sun4').innerHTML = " ";
            document.getElementById('Sun5').innerHTML = " ";
            document.getElementById('Sun6').innerHTML = " ";

            document.getElementById('Mon1').innerHTML = " ";
            document.getElementById('Mon2').innerHTML = " ";
            document.getElementById('Mon3').innerHTML = " ";
            document.getElementById('Mon4').innerHTML = " ";
            document.getElementById('Mon5').innerHTML = " ";
            document.getElementById('Mon6').innerHTML = " ";


            document.getElementById('Tue1').innerHTML = " ";
            document.getElementById('Tue2').innerHTML = " ";
            document.getElementById('Tue3').innerHTML = " ";
            document.getElementById('Tue4').innerHTML = " ";
            document.getElementById('Tue5').innerHTML = " ";
            document.getElementById('Tue6').innerHTML = " ";

            document.getElementById('Wed1').innerHTML = " ";
            document.getElementById('Wed2').innerHTML = " ";
            document.getElementById('Wed3').innerHTML = " ";
            document.getElementById('Wed4').innerHTML = " ";
            document.getElementById('Wed5').innerHTML = " ";
            document.getElementById('Wed6').innerHTML = " ";

            document.getElementById('Thur1').innerHTML = " ";
            document.getElementById('Thur2').innerHTML = " ";
            document.getElementById('Thur3').innerHTML = " ";
            document.getElementById('Thur4').innerHTML = " ";
            document.getElementById('Thur5').innerHTML = " ";
            document.getElementById('Thur6').innerHTML = " ";

            document.getElementById('Fri1').innerHTML = " ";
            document.getElementById('Fri2').innerHTML = " ";
            document.getElementById('Fri3').innerHTML = " ";
            document.getElementById('Fri4').innerHTML = " ";
            document.getElementById('Fri5').innerHTML = " ";
            document.getElementById('Fri6').innerHTML = " ";

            document.getElementById('Sat1').innerHTML = " ";
            document.getElementById('Sat2').innerHTML = " ";
            document.getElementById('Sat3').innerHTML = " ";
            document.getElementById('Sat4').innerHTML = " ";
            document.getElementById('Sat5').innerHTML = " ";
            document.getElementById('Sat6').innerHTML = " ";


        }

        function lastMonth() {
            init();
            if (1 < month_num) {
                month_num = month_num - 1;
                cal();
            } else {
                month_num = 12;
                year = year - 1;
                cal();
            }
        }

        function nextMonth() {
            init();
            if (month_num < 12) {
                month_num = month_num + 1;
                cal();
            } else {
                month_num = 1;
                year = year + 1;
                cal();
            }
        }

        function currentMonth() {
            init();
            today = new Date();
            month_num = today.getMonth() + 1;
            year = today.getFullYear();
            cal();
        }


    </script>
</head>
<body onload="cal()">
<main>
    {% block content %}
    {% endblock %}
</main>
</body>
</html>